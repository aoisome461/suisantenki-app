# Role
あなたはフーディソンの商品開発チームリーダーの右腕として働く、シニアフルスタックエンジニアです。
水産業界のドメイン知識（時化、漁法、需要予測）を理解し、実戦で使えるダッシュボードを開発してください。

# Goal
「産地の供給リスク」と「東京の需要」を可視化する、水産特化型お天気ダッシュボード「UMI-MIRU」のプロトタイプを作成する。

# Requirements

## 1. モニタリング拠点 (全13箇所)
以下の座標を使用してデータを取得すること：
- 函館 (41.76, 140.74), 石巻 (38.41, 141.32), 福島相馬 (37.83, 140.95), 千葉勝浦 (35.15, 140.32), 富山魚津 (36.83, 137.40), 愛知蒲郡 (34.82, 137.22), 京都舞鶴 (35.47, 135.39), 香川多度津 (34.27, 133.75), 徳島 (34.05, 134.58), 福岡博多 (33.60, 130.40), 東京港 (35.689488, 139.691706), 兵庫香住 (35.64, 134.63), 北海道別海 (43.39, 145.12), 東京 (35.66, 139.79)

## 2. 機能要件 (Backend - Python/FastAPI)
- **Marine API:** Open-MeteoのMarine APIを使用し、13漁港の3日間（1時間単位）の「波高 (wave_height)」「風速 (wind_speed)」を取得。
- **Weather API:** 東京についてはForecast APIを使用し、「気温 (temperature)」「降水確率 (precipitation)」「風速」を取得。
- **データ加工:**
  - 波高に基づきステータスを付与（2.5m以上: 赤/時化、1.5m以上: 黄/注意、それ未満: 青/凪）。
  - 潮汐ロジック：簡易的な月齢計算に基づき、その日が「大潮」かどうかを判定するフラグを付与。また、今日の日付から計算した月齢（例: 14.5）も表示。
  - 需要予測ロジック：東京の気温が前日比-3度以下、または降水確率50%以上の場合に「来店リスクあり/鍋需要増」などのレコメンドテキストを生成。

## 3. 画面要件 (Frontend - Streamlit)
- **Layout:** 2カラム構成。
- **Sidebar:** 拠点選択（デフォルトは千葉勝浦）や更新ボタン。
- **表示順序と内容:**
    - **[最上部] タイトル:** 「UMI-MIRU: 水産お天気ダッシュボード」
    - **[最上部] 現在の天気図:** 気象庁の最新天気図を画像で表示 (URL: https://www.jma.go.jp/bosai/numericmap/data/nwpmap/asjp.png)。
    - **[中段] 東京マーケット需要予測カード:** 東京の需要予測を表示。
    - **[中段] 拠点海況マトリックス:** 縦軸に拠点（全13拠点）、横軸に日付（今日・明日・明後日）。セルの背景色を波高ステータスに応じて塗り分ける。
    - **[中段] 選択拠点の詳細グラフ:** サイドバーで選択された拠点の3日間分の「波の高さ」と「風速」の推移を折れ線グラフで表示。
    - **[下段] Windy.com (動的マップ):** 日本全体の風と波の埋め込みマップ（横幅いっぱいの高さ600px）。
    - **[下段] 海面水温図:** 気象庁の海面水温図を画像で表示 (URL: https://www.data.jma.go.jp/gmd/kaikyou/kaikyou/tile/jp/png/sst_now.png)。キャプション『気象庁：日別海面水温（日本近海）』。
    - **[下段] 全国波浪実況図:** 気象庁の全国波浪実況図を画像で表示 (URL: https://www.data.jma.go.jp/gmd/waveinf/tile/jp/png/p_now.png)。キャプション『気象庁：全国波浪実況図』。
    - **[最下部] 気象庁公式サイトへの予備リンクボタン:**
        - 『海面水温 詳細ページ』: https://www.data.jma.go.jp/kaikyou/kaikyou/tile/jp/index_sstanl.html
        - 『気象庁 公式メニュー』: https://www.jma.go.jp/jma/menu/menuflash.html
- **画像表示の注意:** 全ての画像表示において `use_container_width=True` (または将来的な `width='stretch'`) を設定し、画面幅に合わせて自動調整されるようにすること。

# Implementation Task
1. 上記仕様を満たす `main.py` を作成してください。
2. 以前作成したコード（geopy, requests等を使用）の知見を活かし、より堅牢なエラーハンドリング（API失敗時に他拠点を落とさない等）を実装してください。
3. Streamlitを使用して、PC・スマホ両方で視認性の高いUIコードを出力してください。

# Instructions
- 全てのレスポンスとコード内のコメントは日本語で行ってください。
- 技術的な解説も日本語で分かりやすく説明してください。